import{S as t,i as s,s as a,a as n,e as c,h as o,d as e,c as l,b as i,f as r,j as h,m as u,k as f,n as m,t as p,g as d,l as v,o as y,p as g,q as b,u as E,r as I,v as T,w}from"./client.4a669ee3.js";function D(t,s,a){const n=t.slice();return n[26]=s[a].k,n[27]=s[a].v,n[28]=s[a]._id,n}function V(t,s,a){const n=t.slice();return n[31]=s[a].data,n[32]=s[a].t,n[33]=s[a].f,n[28]=s[a]._id,n}function k(t){let s,a,o,m,T,w,k,x,U,j,O,M,P,z,q,H,F,R,$,_,S,A,C,G,J,K,L,Q,W,X,Y,Z,tt,st,at,nt,ct,ot,et,lt,it,rt,ht,ut,ft,mt,pt,dt,vt=t[0].name+"",yt=t[0].oMsg,gt=[];for(let s=0;s<yt.length;s+=1)gt[s]=N(V(t,yt,s));let bt=t[0].myMemo,Et=[];for(let s=0;s<bt.length;s+=1)Et[s]=B(D(t,bt,s));return{c(){s=c("div"),a=c("h3"),o=p("你好 "),m=p(vt),T=n(),w=c("h5"),k=p("Tip:用户设置请点击用户名,离开时点击睡眠按钮,没新消息时试试刷新"),x=n(),U=c("button"),j=p("睡眠"),O=n(),M=c("button"),P=p("刷新"),z=n(),q=c("button"),H=p("删除按钮开关"),F=n(),R=c("button"),$=p("注销"),_=n(),S=c("div"),A=c("div");for(let t=0;t<gt.length;t+=1)gt[t].c();C=n(),G=c("div");for(let t=0;t<Et.length;t+=1)Et[t].c();J=n(),K=c("div"),L=c("div"),Q=p("内容或备忘录具体值"),W=n(),X=c("div"),Y=c("div"),Z=n(),tt=c("form"),st=c("div"),at=c("div"),nt=c("div"),ct=p("发给谁(和)或键值"),ot=n(),et=c("input"),lt=n(),it=c("div"),rt=c("button"),ht=p("发送消息"),ut=n(),ft=c("button"),mt=p("添加备忘录"),this.h()},l(t){s=i(t,"DIV",{class:!0});var n=r(s);a=i(n,"H3",{class:!0});var c=r(a);o=d(c,"你好 "),m=d(c,vt),c.forEach(e),T=l(n),w=i(n,"H5",{class:!0,style:!0});var h=r(w);k=d(h,"Tip:用户设置请点击用户名,离开时点击睡眠按钮,没新消息时试试刷新"),h.forEach(e),x=l(n),U=i(n,"BUTTON",{class:!0,style:!0});var u=r(U);j=d(u,"睡眠"),u.forEach(e),O=l(n),M=i(n,"BUTTON",{class:!0,style:!0});var f=r(M);P=d(f,"刷新"),f.forEach(e),z=l(n),q=i(n,"BUTTON",{class:!0,style:!0});var p=r(q);H=d(p,"删除按钮开关"),p.forEach(e),F=l(n),R=i(n,"BUTTON",{class:!0,style:!0});var v=r(R);$=d(v,"注销"),v.forEach(e),n.forEach(e),_=l(t),S=i(t,"DIV",{class:!0,style:!0});var y=r(S);A=i(y,"DIV",{class:!0,style:!0});var g=r(A);for(let t=0;t<gt.length;t+=1)gt[t].l(g);g.forEach(e),C=l(y),G=i(y,"DIV",{class:!0,style:!0});var b=r(G);for(let t=0;t<Et.length;t+=1)Et[t].l(b);b.forEach(e),y.forEach(e),J=l(t),K=i(t,"DIV",{style:!0,id:!0,class:!0});var E=r(K);L=i(E,"DIV",{class:!0,style:!0});var I=r(L);Q=d(I,"内容或备忘录具体值"),I.forEach(e),W=l(E),X=i(E,"DIV",{class:!0,style:!0});var D=r(X);Y=i(D,"DIV",{class:!0,style:!0,contenteditable:!0,id:!0}),r(Y).forEach(e),D.forEach(e),Z=l(E),tt=i(E,"FORM",{id:!0,style:!0});var V=r(tt);st=i(V,"DIV",{class:!0});var N=r(st);at=i(N,"DIV",{class:!0});var B=r(at);nt=i(B,"DIV",{class:!0});var pt=r(nt);ct=d(pt,"发给谁(和)或键值"),pt.forEach(e),ot=l(B),et=i(B,"INPUT",{class:!0,type:!0}),B.forEach(e),N.forEach(e),lt=l(V),it=i(V,"DIV",{class:!0});var dt=r(it);rt=i(dt,"BUTTON",{class:!0,type:!0,style:!0});var yt=r(rt);ht=d(yt,"发送消息"),yt.forEach(e),ut=l(dt),ft=i(dt,"BUTTON",{class:!0,type:!0,style:!0});var bt=r(ft);mt=d(bt,"添加备忘录"),bt.forEach(e),dt.forEach(e),V.forEach(e),E.forEach(e),this.h()},h(){h(a,"class","col-sm-2 text-primary"),h(w,"class","col-sm-2 text-danger"),u(w,"line-height","1.3em"),h(U,"class","btn col-sm-1 btn-primary"),u(U,"outline","none"),h(M,"class","btn col-sm-1 col-sm-offset-1"),u(M,"outline","none"),h(q,"class","btn col-sm-2 col-sm-offset-1 btn-danger"),u(q,"outline","none"),h(R,"class","col-sm-1 btn btn-info col-sm-offset-1"),u(R,"outline","none"),h(s,"class","row"),h(A,"class","col-sm-9 btn-success"),u(A,"overflow","auto"),u(A,"height","100%"),u(A,"border-radius","0.3em"),h(G,"class","col-sm-3 btn-warning"),u(G,"overflow","auto"),u(G,"height","100%"),u(G,"border-radius","0.3em"),h(S,"class","row"),u(S,"height","58%"),h(L,"class","text-info text-center"),u(L,"width","100%"),u(L,"height","9%"),u(L,"line-height","1.3em"),u(L,"font-size","1.5em"),h(Y,"class","col-sm-12 bg-info"),u(Y,"overflow","auto"),u(Y,"height","100%"),u(Y,"border-radius","0.3em"),u(Y,"outline","none"),u(Y,"font-size","1.7em"),u(Y,"line-height","1em"),h(Y,"contenteditable",""),h(Y,"id","vInput"),h(X,"class","row"),u(X,"height","60%"),h(nt,"class","input-group-addon"),h(et,"class","form-control"),h(et,"type","input"),h(at,"class","input-group col-xs-12"),h(st,"class","form-group row"),h(rt,"class","btn btn-success col-xs-7"),h(rt,"type","button"),u(rt,"outline","none"),h(ft,"class","btn btn-warning col-xs-5"),h(ft,"type","button"),u(ft,"outline","none"),h(it,"class","form-group row"),h(tt,"id","form"),u(tt,"margin-top","1em"),u(K,"height","35%"),u(K,"position","relative"),h(K,"id","oUse"),h(K,"class","svelte-1sv4t20")},m(n,c){f(n,s,c),v(s,a),v(a,o),v(a,m),v(s,T),v(s,w),v(w,k),v(s,x),v(s,U),v(U,j),v(s,O),v(s,M),v(M,P),v(s,z),v(s,q),v(q,H),v(s,F),v(s,R),v(R,$),f(n,_,c),f(n,S,c),v(S,A);for(let t=0;t<gt.length;t+=1)gt[t]&&gt[t].m(A,null);v(S,C),v(S,G);for(let t=0;t<Et.length;t+=1)Et[t]&&Et[t].m(G,null);f(n,J,c),f(n,K,c),v(K,L),v(L,Q),v(K,W),v(K,X),v(X,Y),v(K,Z),v(K,tt),v(tt,st),v(st,at),v(at,nt),v(nt,ct),v(at,ot),v(at,et),y(et,t[1]),v(tt,lt),v(tt,it),v(it,rt),v(rt,ht),v(it,ut),v(it,ft),v(ft,mt),pt||(dt=[g(a,"click",t[21]),g(U,"click",t[22]),g(M,"click",t[23]),g(q,"click",t[24]),g(R,"click",t[7]),g(et,"input",t[25]),g(rt,"click",t[8]),g(ft,"click",t[9])],pt=!0)},p(t,s){if(1&s[0]&&vt!==(vt=t[0].name+"")&&b(m,vt),98369&s[0]){let a;for(yt=t[0].oMsg,a=0;a<yt.length;a+=1){const n=V(t,yt,a);gt[a]?gt[a].p(n,s):(gt[a]=N(n),gt[a].c(),gt[a].m(A,null))}for(;a<gt.length;a+=1)gt[a].d(1);gt.length=yt.length}if(19521&s[0]){let a;for(bt=t[0].myMemo,a=0;a<bt.length;a+=1){const n=D(t,bt,a);Et[a]?Et[a].p(n,s):(Et[a]=B(n),Et[a].c(),Et[a].m(G,null))}for(;a<Et.length;a+=1)Et[a].d(1);Et.length=bt.length}2&s[0]&&y(et,t[1])},d(t){t&&e(s),t&&e(_),t&&e(S),E(gt,t),E(Et,t),t&&e(J),t&&e(K),pt=!1,I(dt)}}}function x(t){let s,a,o,m,y,E,I,T,w,D,V=t[0].name+"";return{c(){s=c("div"),a=c("h1"),o=p("正在睡眠状态..."),m=n(),y=c("button"),E=p("进入"),I=p(V),T=p("的首页"),this.h()},l(t){s=i(t,"DIV",{class:!0,style:!0});var n=r(s);a=i(n,"H1",{class:!0,style:!0});var c=r(a);o=d(c,"正在睡眠状态..."),c.forEach(e),m=l(n),y=i(n,"BUTTON",{class:!0,style:!0});var h=r(y);E=d(h,"进入"),I=d(h,V),T=d(h,"的首页"),h.forEach(e),n.forEach(e),this.h()},h(){h(a,"class","text-primary lead text-center"),u(a,"line-height","5em"),u(a,"font-size","3.7em"),h(y,"class","btn btn-success btn-block text-center"),u(y,"outline","none"),u(y,"margin-top","23%"),h(s,"class","bg-info"),u(s,"height","97%"),u(s,"border-radius","1em")},m(n,c){f(n,s,c),v(s,a),v(a,o),v(s,m),v(s,y),v(y,E),v(y,I),v(y,T),w||(D=g(y,"click",t[20]),w=!0)},p(t,s){1&s[0]&&V!==(V=t[0].name+"")&&b(I,V)},d(t){t&&e(s),w=!1,D()}}}function U(t){let s,a,o,m,b,E,T,w,D,V,k,x,U,j,N,O,B,M,P,z,q,H,F,R,$,_;return{c(){s=c("form"),a=c("div"),o=c("div"),m=c("div"),b=p("旧密码"),E=n(),T=c("input"),w=n(),D=c("div"),V=c("div"),k=c("div"),x=p("新密码"),U=n(),j=c("input"),N=n(),O=c("div"),B=c("button"),M=p("修改密码"),P=n(),z=c("button"),q=p("删除账户"),H=n(),F=c("button"),R=p("退出设置"),this.h()},l(t){s=i(t,"FORM",{id:!0,style:!0});var n=r(s);a=i(n,"DIV",{class:!0});var c=r(a);o=i(c,"DIV",{class:!0});var h=r(o);m=i(h,"DIV",{class:!0});var u=r(m);b=d(u,"旧密码"),u.forEach(e),E=l(h),T=i(h,"INPUT",{class:!0,autocomplete:!0,type:!0}),h.forEach(e),c.forEach(e),w=l(n),D=i(n,"DIV",{class:!0});var f=r(D);V=i(f,"DIV",{class:!0});var p=r(V);k=i(p,"DIV",{class:!0});var v=r(k);x=d(v,"新密码"),v.forEach(e),U=l(p),j=i(p,"INPUT",{class:!0,type:!0}),p.forEach(e),f.forEach(e),N=l(n),O=i(n,"DIV",{class:!0});var y=r(O);B=i(y,"BUTTON",{class:!0,type:!0,style:!0});var g=r(B);M=d(g,"修改密码"),g.forEach(e),y.forEach(e),n.forEach(e),P=l(t),z=i(t,"BUTTON",{class:!0,style:!0});var I=r(z);q=d(I,"删除账户"),I.forEach(e),H=l(t),F=i(t,"BUTTON",{class:!0,style:!0});var $=r(F);R=d($,"退出设置"),$.forEach(e),this.h()},h(){h(m,"class","input-group-addon"),h(T,"class","form-control"),h(T,"autocomplete","off"),h(T,"type","password"),h(o,"class","input-group"),h(a,"class","form-group"),h(k,"class","input-group-addon"),h(j,"class","form-control"),h(j,"type","password"),h(V,"class","input-group"),h(D,"class","form-group top svelte-1sv4t20"),h(B,"class","btn btn-warning btn-block"),h(B,"type","button"),u(B,"outline","none"),h(O,"class","form-group top svelte-1sv4t20"),h(s,"id","form"),u(s,"margin-top","15em"),h(z,"class","btn btn-danger btn-block top svelte-1sv4t20"),u(z,"outline","none"),h(F,"class","btn btn-success btn-block top svelte-1sv4t20"),u(F,"outline","none")},m(n,c){f(n,s,c),v(s,a),v(a,o),v(o,m),v(m,b),v(o,E),v(o,T),y(T,t[3]),v(s,w),v(s,D),v(D,V),v(V,k),v(k,x),v(V,U),v(V,j),y(j,t[4]),v(s,N),v(s,O),v(O,B),v(B,M),f(n,P,c),f(n,z,c),v(z,q),f(n,H,c),f(n,F,c),v(F,R),$||(_=[g(T,"input",t[17]),g(j,"input",t[18]),g(B,"click",t[13]),g(z,"click",t[12]),g(F,"click",t[19])],$=!0)},p(t,s){8&s[0]&&T.value!==t[3]&&y(T,t[3]),16&s[0]&&j.value!==t[4]&&y(j,t[4])},d(t){t&&e(s),t&&e(P),t&&e(z),t&&e(H),t&&e(F),$=!1,I(_)}}}function j(t){let s,a,o,m,y,b,E;return{c(){s=c("button"),a=p("删除"),o=n(),m=c("button"),y=p("撤回"),this.h()},l(t){s=i(t,"BUTTON",{class:!0,style:!0});var n=r(s);a=d(n,"删除"),n.forEach(e),o=l(t),m=i(t,"BUTTON",{class:!0,style:!0});var c=r(m);y=d(c,"撤回"),c.forEach(e),this.h()},h(){h(s,"class","col-sm-offset-1 col-sm-1 btn btn-danger"),u(s,"outline","none"),h(m,"class","col-sm-1 btn btn-danger"),u(m,"outline","none")},m(n,c){f(n,s,c),v(s,a),f(n,o,c),f(n,m,c),v(m,y),b||(E=[g(s,"click",(function(){T(t[15](t[28]))&&t[15](t[28]).apply(this,arguments)})),g(m,"click",(function(){T(t[16](t[28]))&&t[16](t[28]).apply(this,arguments)}))],b=!0)},p(s,a){t=s},d(t){t&&e(s),t&&e(o),t&&e(m),b=!1,I(E)}}}function N(t){let s,a,o,m,y,g,E,I,T,w,D=t[33]+"",V=t[32]+"",k=t[31]+"",x=t[6]&&j(t);return{c(){s=c("div"),a=c("div"),o=p(D),m=p(" 发送给 "),y=p(V),g=n(),E=c("div"),I=p(k),T=n(),x&&x.c(),w=n(),this.h()},l(t){s=i(t,"DIV",{class:!0,style:!0});var n=r(s);a=i(n,"DIV",{class:!0});var c=r(a);o=d(c,D),m=d(c," 发送给 "),y=d(c,V),c.forEach(e),g=l(n),E=i(n,"DIV",{class:!0});var h=r(E);I=d(h,k),h.forEach(e),T=l(n),x&&x.l(n),w=l(n),n.forEach(e),this.h()},h(){h(a,"class","col-sm-3 test-center"),h(E,"class","col-sm-offset-1 col-sm-5"),h(s,"class","row"),u(s,"line-height","1.3em"),u(s,"font-size","1.1em"),u(s,"border-bottom","3px solid pink")},m(t,n){f(t,s,n),v(s,a),v(a,o),v(a,m),v(a,y),v(s,g),v(s,E),v(E,I),v(s,T),x&&x.m(s,null),v(s,w)},p(t,a){1&a[0]&&D!==(D=t[33]+"")&&b(o,D),1&a[0]&&V!==(V=t[32]+"")&&b(y,V),1&a[0]&&k!==(k=t[31]+"")&&b(I,k),t[6]?x?x.p(t,a):(x=j(t),x.c(),x.m(s,w)):x&&(x.d(1),x=null)},d(t){t&&e(s),x&&x.d()}}}function O(t){let s,a,n,o;return{c(){s=c("button"),a=p("删除"),this.h()},l(t){s=i(t,"BUTTON",{class:!0,style:!0});var n=r(s);a=d(n,"删除"),n.forEach(e),this.h()},h(){h(s,"class","btn btn-danger col-sm-offset-1 col-sm-2"),u(s,"outline","none")},m(c,e){f(c,s,e),v(s,a),n||(o=g(s,"click",w((function(){T(t[14](t[28]))&&t[14](t[28]).apply(this,arguments)}))),n=!0)},p(s,a){t=s},d(t){t&&e(s),n=!1,o()}}}function B(t){let s,a,o,m,y,E,w,D,V,k,x=t[26]+"",U=t[27]+"",j=t[6]&&O(t);return{c(){s=c("div"),a=c("div"),o=p(x),m=n(),y=c("div"),E=p(U),w=n(),j&&j.c(),D=n(),this.h()},l(t){s=i(t,"DIV",{class:!0,style:!0});var n=r(s);a=i(n,"DIV",{class:!0});var c=r(a);o=d(c,x),c.forEach(e),m=l(n),y=i(n,"DIV",{class:!0});var h=r(y);E=d(h,U),h.forEach(e),w=l(n),j&&j.l(n),D=l(n),n.forEach(e),this.h()},h(){h(a,"class","col-sm-4 test-center"),h(y,"class","col-sm-5 text-center"),h(s,"class","row"),u(s,"line-height","1.3em"),u(s,"font-size","1.1em"),u(s,"border-bottom","3px solid pink")},m(n,c){f(n,s,c),v(s,a),v(a,o),v(s,m),v(s,y),v(y,E),v(s,w),j&&j.m(s,null),v(s,D),V||(k=[g(a,"click",(function(){T(t[10](t[26]))&&t[10](t[26]).apply(this,arguments)}),{once:!0}),g(y,"click",(function(){T(t[11](t[26],t[27]))&&t[11](t[26],t[27]).apply(this,arguments)}),{once:!0})],V=!0)},p(a,n){t=a,1&n[0]&&x!==(x=t[26]+"")&&b(o,x),1&n[0]&&U!==(U=t[27]+"")&&b(E,U),t[6]?j?j.p(t,n):(j=O(t),j.c(),j.m(s,D)):j&&(j.d(1),j=null)},d(t){t&&e(s),j&&j.d(),V=!1,I(k)}}}function M(t){let s,a,p;function d(t,s){return t[2]?U:t[5]?x:k}document.title=s=t[0].name+"的主页";let v=d(t),y=v(t);return{c(){a=n(),p=c("div"),y.c(),this.h()},l(t){o("svelte-1qxia5t",document.head).forEach(e),a=l(t),p=i(t,"DIV",{class:!0,style:!0,id:!0});var s=r(p);y.l(s),s.forEach(e),this.h()},h(){h(p,"class","container"),u(p,"height","100%"),u(p,"border-radius","1em"),h(p,"id","cont")},m(t,s){f(t,a,s),f(t,p,s),y.m(p,null)},p(t,a){1&a[0]&&s!==(s=t[0].name+"的主页")&&(document.title=s),v===(v=d(t))&&y?y.p(t,a):(y.d(1),y=v(t),y&&(y.c(),y.m(p,null)))},i:m,o:m,d(t){t&&e(a),t&&e(p),y.d()}}}async function P(t){let{params:s}=t;const a=await this.fetch("home/".concat(s.slug,".json?type=pre")),n=await a.json();if(200===a.status)return n.oMsg.reverse(),{post:n};this.error(a.status,n.message)}function z(t,s,a){let n,c,o,{post:e}=s,l=!1,i=!1,r=!1;function h(t){a(1,n=""===n||void 0===n?"".concat(t):"".concat(n,"和").concat(t))}return t.$$set=t=>{"post"in t&&a(0,e=t.post)},[e,n,l,c,o,i,r,async function(){await fetch("home/".concat(e.name,".json?type=quit")),location.pathname=""},async function(){""==vInput.innerText||null==n||""==n?alert("内容或接收人不能为空!"):(await fetch("home/".concat(e.name,".json?type=addMsg&data=").concat(vInput.innerText,"&t=").concat(n)),location.pathname="home/".concat(e.name))},async function(){""==vInput.innerText||null==n||""==n?alert("键值或value值不能为空!"):(await fetch("home/".concat(e.name,".json?type=addMemo&v=").concat(vInput.innerText,"&k=").concat(n)),location.pathname="home/".concat(e.name))},h,function(t,s){h(t),vInput.innerText="".concat(vInput.innerText).concat(s)},async function(){if(void 0===c||""===c)alert("请填写旧密码后尝试!");else{const t=await fetch("home/".concat(e.name,".json?type=delUser&pass=").concat(c));(await t.json()).yes?location.pathname="/":alert("密码错误或其它原因导致删除失败!")}},async function(){if(void 0===c||""===c||void 0===o||""===o)alert("请填写密码后尝试!");else{const t=await fetch("home/".concat(e.name,".json?type=setPass&oldPass=").concat(c,"&newPass=").concat(o));(await t.json()).yes?(await fetch("home/".concat(e.name,".json?type=quit")),location.pathname="/login"):alert("密码错误或其它原因导致修改失败!")}},async function(t){await fetch("home/".concat(e.name,".json?type=delMemo&id=").concat(t)),location.pathname="home/".concat(e.name)},async function(t){await fetch("home/".concat(e.name,".json?type=delMsg&id=").concat(t)),location.pathname="home/".concat(e.name)},async function(t){const s=await fetch("home/".concat(e.name,".json?type=turnMsg&id=").concat(t));(await s.json()).yes?location.pathname="home/".concat(e.name):alert("这不是您的消息或其它原因撤回失败!")},function(){c=this.value,a(3,c)},function(){o=this.value,a(4,o)},()=>a(2,l=!l),()=>history.go(0),()=>a(2,l=!l),()=>a(5,i=!0),()=>history.go(0),()=>a(6,r=!r),function(){n=this.value,a(1,n)}]}class q extends t{constructor(t){super(),s(this,t,z,M,a,{post:0},null,[-1,-1])}}export{q as default,P as preload};
